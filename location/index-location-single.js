const localCard = document.querySelector(".localBox");

 function localCardCreator(location){ // меню персонажей
    localCard.innerHTML = "";
    location.forEach(local =>{
        localCard.innerHTML += 
        `<div class="local" data-id="${local.id}">
    <span class="svg-planet"><svg width="45" height="36" viewBox="0 0 45 36" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
    <path d="M44.4581 5.38135C43.0237 2.90823 39.2381 2.35135 33.4893 3.7576C30.8279 1.69968 27.6426 0.429432 24.2954 0.091162C20.9481 -0.247108 17.5731 0.360159 14.5537 1.84398C11.5343 3.3278 8.99161 5.62868 7.21441 8.48525C5.43722 11.3418 4.49679 14.6396 4.49996 18.0039C4.5002 18.7755 4.54904 19.5464 4.64621 20.312C-0.545664 25.6914 -0.470664 28.8789 0.543711 30.6264C1.49996 32.2839 3.49496 33.0039 6.11996 33.0039C7.9425 32.9661 9.7543 32.7144 11.5181 32.2539C14.1799 34.3098 17.3647 35.5782 20.7111 35.9152C24.0575 36.2521 27.4313 35.6441 30.4495 34.16C33.4677 32.676 36.0094 30.3755 37.7859 27.5197C39.5625 24.6639 40.5028 21.3672 40.5 18.0039C40.5003 17.2359 40.4521 16.4688 40.3556 15.707C42.6993 13.2695 44.2593 10.9539 44.79 8.97198C45.1556 7.59948 45.045 6.39198 44.4581 5.38135ZM22.5 3.00385C25.8974 3.00734 29.1932 4.16247 31.8495 6.28066C34.5057 8.39884 36.3654 11.3549 37.125 14.6664C33.9262 17.6776 29.5968 20.7657 25.4868 23.1282C20.3212 26.0926 15.84 27.9413 12.2662 28.9538C10.0651 26.9009 8.53303 24.2329 7.86945 21.2971C7.20588 18.3613 7.44154 15.2937 8.54576 12.4937C9.64998 9.69373 11.5716 7.29103 14.0605 5.59842C16.5493 3.90582 19.4901 3.00173 22.5 3.00385ZM3.13871 29.1207C2.86496 28.6501 3.01684 27.7632 3.55496 26.6832C4.0871 25.6713 4.73453 24.7244 5.48434 23.8614C6.22759 26.0148 7.37286 28.0076 8.85934 29.7339C5.62496 30.2776 3.60746 29.9307 3.13871 29.1207ZM22.5 33.0039C19.9708 33.0064 17.4827 32.365 15.27 31.1401C19.3314 29.7037 23.2502 27.8921 26.9756 25.7289C31.0218 23.4057 34.6031 20.8876 37.4887 18.4014C37.3818 22.3073 35.7564 26.0176 32.9576 28.7443C30.1589 31.4709 26.4073 32.999 22.5 33.0039ZM41.8912 8.19573C41.5725 9.37885 40.7306 10.7326 39.5231 12.1576C38.7818 10.0016 37.6363 8.00662 36.1481 6.27948C38.8125 5.83885 41.28 5.8726 41.8668 6.88698C42.0356 7.18135 42.045 7.62198 41.8912 8.19573Z"/>
 </svg></span>
 <span class="planetxt">Planet</span>
 <span class="planetName">${local.name}</span>
 <button class="planetSaibaMais"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                  <path d="M9.75 0C7.82164 0 5.93657 0.571828 4.33319 1.64317C2.72982 2.71451 1.48013 4.23726 0.742179 6.01884C0.00422452 7.80042 -0.188858 9.76082 0.187348 11.6521C0.563554 13.5434 1.49215 15.2807 2.85571 16.6443C4.21928 18.0079 5.95656 18.9365 7.84787 19.3127C9.73919 19.6889 11.6996 19.4958 13.4812 18.7578C15.2627 18.0199 16.7855 16.7702 17.8568 15.1668C18.9282 13.5634 19.5 11.6784 19.5 9.75C19.4973 7.16498 18.4692 4.68661 16.6413 2.85872C14.8134 1.03084 12.335 0.00272983 9.75 0ZM9.75 18C8.11831 18 6.52326 17.5161 5.16655 16.6096C3.80984 15.7031 2.75242 14.4146 2.128 12.9071C1.50358 11.3996 1.3402 9.74085 1.65853 8.1405C1.97685 6.54016 2.76259 5.07015 3.91637 3.91637C5.07016 2.76259 6.54017 1.97685 8.14051 1.65852C9.74085 1.34019 11.3997 1.50357 12.9071 2.12799C14.4146 2.75242 15.7031 3.80984 16.6096 5.16655C17.5161 6.52325 18 8.1183 18 9.75C17.9975 11.9373 17.1275 14.0343 15.5809 15.5809C14.0343 17.1275 11.9373 17.9975 9.75 18ZM11.25 14.25C11.25 14.4489 11.171 14.6397 11.0303 14.7803C10.8897 14.921 10.6989 15 10.5 15C10.1022 15 9.72065 14.842 9.43934 14.5607C9.15804 14.2794 9 13.8978 9 13.5V9.75C8.80109 9.75 8.61033 9.67098 8.46967 9.53033C8.32902 9.38968 8.25 9.19891 8.25 9C8.25 8.80109 8.32902 8.61032 8.46967 8.46967C8.61033 8.32902 8.80109 8.25 9 8.25C9.39783 8.25 9.77936 8.40804 10.0607 8.68934C10.342 8.97064 10.5 9.35218 10.5 9.75V13.5C10.6989 13.5 10.8897 13.579 11.0303 13.7197C11.171 13.8603 11.25 14.0511 11.25 14.25ZM8.25 5.625C8.25 5.4025 8.31598 5.18499 8.4396 4.99998C8.56322 4.81498 8.73892 4.67078 8.94449 4.58564C9.15005 4.50049 9.37625 4.47821 9.59448 4.52162C9.81271 4.56502 10.0132 4.67217 10.1705 4.8295C10.3278 4.98684 10.435 5.18729 10.4784 5.40552C10.5218 5.62375 10.4995 5.84995 10.4144 6.05552C10.3292 6.26109 10.185 6.43679 10 6.5604C9.81501 6.68402 9.59751 6.75 9.375 6.75C9.07664 6.75 8.79049 6.63147 8.57951 6.4205C8.36853 6.20952 8.25 5.92337 8.25 5.625Z" />
                                  </svg>Saiba mais</button>
 </div>`
    });
 };

async function getLocalPlace(page){
   const response = await fetch(`https://rickandmortyapi.com/api/location?page=${page}`);
   const locationList = await response.json();
   localCardCreator(locationList.results);
   onClickPaginationButtonLocation(locationList.info.pages, page);
};

getLocalPlace(1);

function iconButton(){
    const button = document.querySelector('.header-svg');
    button.addEventListener('click', function(){
        window.location.href = `../first%20page/index.html`
    })
}
iconButton();

function getSingleLocationCard(location) { // деталка локации
   const box = document.querySelector('.section-first');
   box.innerHTML = `
      <div class="location-svg"><svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M68.9371 17.0662C66.7856 13.3565 61.1071 12.5212 52.484 14.6306C48.4918 11.5437 43.7139 9.63835 38.693 9.13094C33.6722 8.62354 28.6097 9.53444 24.0806 11.7602C19.5515 13.9859 15.7374 17.4372 13.0716 21.7221C10.4058 26.0069 8.99518 30.9536 8.99994 36C9.00029 37.1575 9.07356 38.3139 9.21932 39.4622C1.4315 47.5312 1.544 52.3125 3.06557 54.9337C4.49994 57.42 7.49244 58.5 11.4299 58.5C14.1638 58.4434 16.8814 58.0658 19.5271 57.375C23.5198 60.4589 28.2971 62.3615 33.3167 62.8669C38.3363 63.3724 43.397 62.4603 47.9243 60.2343C52.4516 58.0082 56.2641 54.5575 58.9289 50.2737C61.5937 45.99 63.0041 41.0449 62.9999 36C63.0005 34.8481 62.9282 33.6974 62.7834 32.5547C66.299 28.8984 68.639 25.425 69.4349 22.4522C69.9834 20.3934 69.8174 18.5822 68.9371 17.0662ZM35.9999 13.5C41.096 13.5052 46.0398 15.2379 50.0242 18.4152C54.0086 21.5925 56.7981 26.0266 57.9374 30.9937C53.1393 35.5106 46.6453 40.1428 40.4803 43.6865C32.7318 48.1331 26.0099 50.9062 20.6493 52.425C17.3476 49.3456 15.0495 45.3436 14.0542 40.9399C13.0588 36.5362 13.4123 31.9348 15.0686 27.7348C16.725 23.5348 19.6074 19.9307 23.3407 17.3918C27.074 14.8529 31.4851 13.4968 35.9999 13.5ZM6.95807 52.6753C6.54744 51.9694 6.77525 50.639 7.58244 49.019C8.38065 47.5012 9.3518 46.0808 10.4765 44.7862C11.5914 48.0164 13.3093 51.0055 15.539 53.595C10.6874 54.4106 7.66119 53.8903 6.95807 52.6753ZM35.9999 58.5C32.2062 58.5038 28.474 57.5417 25.1549 55.7044C31.2471 53.5498 37.1253 50.8324 42.7134 47.5875C48.7828 44.1028 54.1546 40.3256 58.4831 36.5962C58.3228 42.4551 55.8846 48.0207 51.6864 52.1106C47.4883 56.2006 41.861 58.4927 35.9999 58.5ZM65.0868 21.2878C64.6087 23.0625 63.3459 25.0931 61.5346 27.2306C60.4227 23.9966 58.7045 21.0041 56.4721 18.4134C60.4687 17.7525 64.1699 17.8031 65.0503 19.3247C65.3034 19.7662 65.3174 20.4272 65.0868 21.2878Z" fill="white"/>
</svg>
</div>
    <div class="descriptionBox">
        <div class="description">
        <div class="name">${location.name}</div>
    <div class="typeBox">
        <div class="planet"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M30.6387 7.585C29.6825 5.93625 27.1587 5.565 23.3262 6.5025C21.5519 5.13056 19.4284 4.28372 17.1969 4.05821C14.9654 3.8327 12.7154 4.23754 10.7025 5.22675C8.68955 6.21597 6.99441 7.74989 5.80961 9.65427C4.62481 11.5587 3.99786 13.7571 3.99997 16C4.00013 16.5145 4.0327 17.0284 4.09747 17.5388C0.636224 21.125 0.686224 23.25 1.36247 24.415C1.99997 25.52 3.32997 26 5.07997 26C6.295 25.9749 7.50287 25.8071 8.67872 25.5C10.4532 26.8706 12.5765 27.7162 14.8074 27.9409C17.0383 28.1655 19.2876 27.7601 21.2997 26.7708C23.3118 25.7815 25.0063 24.2478 26.1906 22.3439C27.375 20.44 28.0018 18.2422 28 16C28.0002 15.4881 27.9681 14.9766 27.9037 14.4688C29.4662 12.8438 30.5062 11.3 30.86 9.97875C31.1037 9.06375 31.03 8.25875 30.6387 7.585ZM16 6C18.2649 6.00233 20.4622 6.77242 22.233 8.18454C24.0038 9.59666 25.2436 11.5674 25.75 13.775C23.6175 15.7825 20.7312 17.8413 17.9912 19.4163C14.5475 21.3925 11.56 22.625 9.17747 23.3C7.71007 21.9314 6.68869 20.1527 6.2463 18.1955C5.80392 16.2383 5.96103 14.1933 6.69717 12.3266C7.43332 10.4599 8.7144 8.85812 10.3736 7.72972C12.0329 6.60132 13.9934 5.99859 16 6ZM3.09247 23.4113C2.90997 23.0975 3.01122 22.5063 3.36997 21.7863C3.72473 21.1117 4.15635 20.4804 4.65622 19.905C5.15172 21.3406 5.91524 22.6691 6.90622 23.82C4.74997 24.1825 3.40497 23.9513 3.09247 23.4113ZM16 26C14.3139 26.0017 12.6551 25.5741 11.18 24.7575C13.8876 23.7999 16.5001 22.5922 18.9837 21.15C21.6812 19.6013 24.0687 17.9225 25.9925 16.265C25.9212 18.8689 24.8376 21.3425 22.9718 23.1603C21.1059 24.978 18.6049 25.9967 16 26ZM28.9275 9.46125C28.715 10.25 28.1537 11.1525 27.3487 12.1025C26.8545 10.6652 26.0909 9.33519 25.0987 8.18375C26.875 7.89 28.52 7.9125 28.9112 8.58875C29.0237 8.785 29.03 9.07875 28.9275 9.46125Z" fill="white"/>
</svg>${location.type}</div>
<div class="dimension"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24 19.6787V12.3212C24.0006 12.0374 23.9269 11.7583 23.7861 11.5118C23.6453 11.2653 23.4423 11.0599 23.1975 10.9163L16.78 7.21C16.5429 7.07308 16.2738 7.001 16 7.001C15.7262 7.001 15.4572 7.07308 15.22 7.21L8.80375 10.9163C8.55868 11.0598 8.35551 11.265 8.21449 11.5116C8.07346 11.7581 7.99951 12.0372 8 12.3212V19.6787C7.99938 19.9626 8.07315 20.2417 8.21395 20.4882C8.35474 20.7347 8.55767 20.9401 8.8025 21.0837L15.22 24.79C15.4572 24.9268 15.7262 24.9988 16 24.9988C16.2738 24.9988 16.5428 24.9268 16.78 24.79L23.1963 21.0837C23.4413 20.9402 23.6445 20.735 23.7855 20.4884C23.9265 20.2419 24.0005 19.9628 24 19.6787ZM16 9.06875L21.0737 12L16 14.9288L10.9263 12L16 9.06875ZM10 13.7738L15 16.6612V22.3538L10 19.4662V13.7738ZM17 22.3538V16.6612L22 13.7738V19.4662L17 22.3538ZM29 6V11C29 11.2652 28.8946 11.5196 28.7071 11.7071C28.5196 11.8946 28.2652 12 28 12C27.7348 12 27.4804 11.8946 27.2929 11.7071C27.1054 11.5196 27 11.2652 27 11V7H23C22.7348 7 22.4804 6.89464 22.2929 6.70711C22.1054 6.51957 22 6.26522 22 6C22 5.73478 22.1054 5.48043 22.2929 5.29289C22.4804 5.10536 22.7348 5 23 5H28C28.2652 5 28.5196 5.10536 28.7071 5.29289C28.8946 5.48043 29 5.73478 29 6ZM10 26C10 26.2652 9.89464 26.5196 9.70711 26.7071C9.51957 26.8946 9.26522 27 9 27H4C3.73478 27 3.48043 26.8946 3.29289 26.7071C3.10536 26.5196 3 26.2652 3 26V21C3 20.7348 3.10536 20.4804 3.29289 20.2929C3.48043 20.1054 3.73478 20 4 20C4.26522 20 4.51957 20.1054 4.70711 20.2929C4.89464 20.4804 5 20.7348 5 21V25H9C9.26522 25 9.51957 25.1054 9.70711 25.2929C9.89464 25.4804 10 25.7348 10 26ZM29 21V26C29 26.2652 28.8946 26.5196 28.7071 26.7071C28.5196 26.8946 28.2652 27 28 27H23C22.7348 27 22.4804 26.8946 22.2929 26.7071C22.1054 26.5196 22 26.2652 22 26C22 25.7348 22.1054 25.4804 22.2929 25.2929C22.4804 25.1054 22.7348 25 23 25H27V21C27 20.7348 27.1054 20.4804 27.2929 20.2929C27.4804 20.1054 27.7348 20 28 20C28.2652 20 28.5196 20.1054 28.7071 20.2929C28.8946 20.4804 29 20.7348 29 21ZM3 11V6C3 5.73478 3.10536 5.48043 3.29289 5.29289C3.48043 5.10536 3.73478 5 4 5H9C9.26522 5 9.51957 5.10536 9.70711 5.29289C9.89464 5.48043 10 5.73478 10 6C10 6.26522 9.89464 6.51957 9.70711 6.70711C9.51957 6.89464 9.26522 7 9 7H5V11C5 11.2652 4.89464 11.5196 4.70711 11.7071C4.51957 11.8946 4.26522 12 4 12C3.73478 12 3.48043 11.8946 3.29289 11.7071C3.10536 11.5196 3 11.2652 3 11Z" fill="white"/>
</svg>${location.dimension}</div>
    </div>
    <div class="countOfPersonages"><svg width="32" height="32" viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_71_5298)">
<path d="M16 3C13.4288 3 10.9154 3.76244 8.77759 5.1909C6.63975 6.61935 4.97351 8.64968 3.98957 11.0251C3.00563 13.4006 2.74819 16.0144 3.2498 18.5362C3.75141 21.0579 4.98953 23.3743 6.80762 25.1924C8.6257 27.0105 10.9421 28.2486 13.4638 28.7502C15.9856 29.2518 18.5995 28.9944 20.9749 28.0104C23.3503 27.0265 25.3807 25.3603 26.8091 23.2224C28.2376 21.0846 29 18.5712 29 16C28.9964 12.5533 27.6256 9.24882 25.1884 6.81163C22.7512 4.37445 19.4467 3.00364 16 3ZM16 27C13.8244 27 11.6977 26.3549 9.88873 25.1462C8.07979 23.9375 6.66989 22.2195 5.83733 20.2095C5.00477 18.1995 4.78693 15.9878 5.21137 13.854C5.63581 11.7202 6.68345 9.7602 8.22183 8.22183C9.76021 6.68345 11.7202 5.6358 13.854 5.21136C15.9878 4.78692 18.1995 5.00476 20.2095 5.83733C22.2195 6.66989 23.9375 8.07979 25.1462 9.88873C26.3549 11.6977 27 13.8244 27 16C26.9967 18.9164 25.8367 21.7123 23.7745 23.7745C21.7123 25.8367 18.9164 26.9967 16 27ZM13 13.5C13 13.7967 12.912 14.0867 12.7472 14.3334C12.5824 14.58 12.3481 14.7723 12.074 14.8858C11.7999 14.9994 11.4983 15.0291 11.2074 14.9712C10.9164 14.9133 10.6491 14.7704 10.4393 14.5607C10.2296 14.3509 10.0867 14.0836 10.0288 13.7926C9.97095 13.5017 10.0007 13.2001 10.1142 12.926C10.2277 12.6519 10.42 12.4176 10.6667 12.2528C10.9133 12.088 11.2033 12 11.5 12C11.8978 12 12.2794 12.158 12.5607 12.4393C12.842 12.7206 13 13.1022 13 13.5ZM22 13.5C22 13.7967 21.912 14.0867 21.7472 14.3334C21.5824 14.58 21.3481 14.7723 21.074 14.8858C20.7999 14.9994 20.4983 15.0291 20.2074 14.9712C19.9164 14.9133 19.6491 14.7704 19.4393 14.5607C19.2296 14.3509 19.0867 14.0836 19.0288 13.7926C18.971 13.5017 19.0007 13.2001 19.1142 12.926C19.2277 12.6519 19.42 12.4176 19.6667 12.2528C19.9133 12.088 20.2033 12 20.5 12C20.8978 12 21.2794 12.158 21.5607 12.4393C21.842 12.7206 22 13.1022 22 13.5Z"/>
</g>
<defs>
<clipPath id="clip0_71_5298">
<rect width="32" height="32"/>
</clipPath>
</defs>
</svg>${location.residents.length} Personagens participaram deste episódio</div>
   `
}
async function getSingleLocation(id){
   const response = await fetch(`https://rickandmortyapi.com/api/location/${id}`)
   const data = await response.json();
   getSingleLocationCard(data);
}

const param = new URLSearchParams(window.location.search);
const id = param.get('id');

if(id){
   getSingleLocation(id)
};

function onClickSaibaMais() {
  localCard.addEventListener('click', function(event){
   const button = event.target.closest('.planetSaibaMais');
   if(!button) return;
   const card = button.closest('.local');
   if(!card) return;
   const id = card.dataset.id;
   window.location.href = `../location/index-location-single.html?id=${id}`
  }) 
};
onClickSaibaMais();

function onClickPaginationButtonLocation(totalPages, actualPage) {
const buttonBox = document.querySelector('.paginationLocal');
const prev = document.querySelector('.prevLocal');
const next = document.querySelector('.nextLocal');
let currentPage = actualPage

function renderPagination(){
   buttonBox.innerHTML = "";
   let startPage = Math.max(1, currentPage-1);
   let endPage = Math.min(totalPages, startPage + 3);
   for(let i = startPage; i <= endPage; i++){
      buttonBox.innerHTML += `<button class="paginationButtonLocal ${i === currentPage ? 'active' : ''}">${i}</button>`;
   }

};
renderPagination();

buttonBox.addEventListener("click", function(event){
   const btn = event.target.closest(".paginationButtonLocal");
   if(!btn) return;
   currentPage = +btn.innerText;
   getLocalPlace(currentPage);
   renderPagination();
});
prev.addEventListener("click",() => {
 if (currentPage > 1){
   currentPage--;
   getLocalPlace(currentPage);
   renderPagination();
 }
})
next.addEventListener("click", () => {
   if (currentPage < totalPages){
      currentPage++;
   getLocalPlace(currentPage);
   renderPagination();
   }
})
}